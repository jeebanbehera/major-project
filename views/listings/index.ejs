<% layout("/layouts/boilerplate") %>
<body>
    <!-- <h1>All Listings</h1>
    <form method="get" action="/Listings/new">
        <button>New Form</button>
    </form> -->
    <style>
      #filters{
          display: flex;
          flex-wrap: wrap;
          align-items: center;
          /* margin-left: 2rem; */
        }
        .filter{
          text-align: center;
          margin-right:2.5rem ;
          margin-top: 1.5rem;
          margin-bottom: 1rem;
          opacity: 0.7;
        }
        .filter p {
          font-size: 0.8rem;
        }
        .filter:hover{
          opacity: 1;
          cursor: pointer;
        }
        .tax-toggle{
          border: 1px solid rgb(102, 102, 102);
          height: 3rem;
          border-radius: 0.7rem;
          padding: 0.6rem;
          margin-left: 2.5rem;
      }
      .tax-info{
        display: none;
      }
    </style>
    
    <nav class="navbar navbar-expand-lg bg-body-light ">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <div id="filters">
                <div class="filter">
                  <div><i class="fa-solid fa-bed"></i></div>
                  <p>rooms</p>
                </div>
                <div class="filter">
                  <div><i class="fa-solid fa-fire"></i></div>
                  <p>trending</p>
                </div>
                <div class="filter">
                  <div><i class="fa-solid fa-person-swimming"></i></div>
                  <p>pools</p>
                </div>
                <div class="filter">
                  <div><i class="fa-solid fa-city"></i></div>
                  <p>Top citys</p>
                </div>
                <div class="filter">
                  <div><i class="fa-brands fa-fort-awesome"></i></div>
                  <p>Castles</p>
                </div>
                <div class="filter">
                  <div><i class="fa-regular fa-snowflake"></i></div>
                  <p>Arctic </p>
                </div>
                <div class="filter">
                  <div><i class="fa-solid fa-water"></i></div>
                  <p>lake</p>
                </div>
                <div class="filter">
                  <div><i class="fa-solid fa-mountain-sun"></i></div>
                  <p>mountain</p>
                </div>
                <div class="filter">
                  <div><i class="fa-solid fa-person-skiing"></i></div>
                  <p>Ski-in/out</p>
                </div>
                <div class="filter">
                  <div><i class="fa-solid fa-building"></i></div>
                  <p>building</p>
                </div>
                <div class="tax-toggle">
                  <div class="form-check form-switch form-check-reverse ">
                  <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                  <label class="form-check-label" for="flexSwitchCheckDefault">display after total tax</label>
                </div>
                </div>
              </div>
            </ul>
          </div>
        </div>
      </nav>
    
    
      <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1">
        <% for(let listing of allListings){ %>
          <a href="/Listings/<%=listing._id%>" class="listing-list">
            <div class="card col listing-card">
                <img src="<%= listing.image.url%>" class="card-img-top" alt="listing_image" style="height:18rem">
                <div class="card-img-overlay"></div>
                <div class="card-body">
                  <p class="card-text">
                    <%=listing.title %><br>
                    &#8377;<%= typeof listing.price === "number" ? listing.price.toLocaleString("en-IN") : listing.price %>/ Night
                    <i class="tax-info">&nbsp; &nbsp; +18 GST</i>
                  </p>
                </div>
            </div>
          </a>
        <% } %>
    </div>


</body>

<script>
  let taxSwitch = document.getElementById("flexSwitchCheckDefault");
  taxSwitch.addEventListener("click", ()=>{
    console.log("clicked");
    let taxInfo = document.getElementsByClassName("tax-info");
    for(info of taxInfo){
      if(info.style.display != "inline"){
        info.style.display = "inline"
      }
      else{
        info.style.display = "none"
      }
      
    }
  })
</script>

